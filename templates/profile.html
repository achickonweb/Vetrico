{% extends "layout.html" %} {% block content %} <div class="h-full overflow-y-auto w-full pb-24"> <div class="pt-20 pb-10 px-4 md:px-10 bg-gradient-to-b from-gray-900 to-black"> <div class="max-w-4xl mx-auto flex flex-col md:flex-row items-center gap-8"> <div class="relative group cursor-pointer" onclick="document.getElementById('avatarInput').click()"> {% if user.avatar %} <img src="/static/avatars/{{ user.avatar }}" class="w-32 h-32 md:w-40 md:h-40 rounded-full object-cover border-4 border-black ring-2 ring-white/20 animate__animated animate__zoomIn"> {% else %} <div class="w-32 h-32 md:w-40 md:h-40 bg-gradient-to-tr from-pink-600 to-purple-600 rounded-full flex items-center justify-center text-5xl font-bold border-4 border-black">{{ user.username[0]|upper }}</div> {% endif %} {% if current_user.id == user.id %} <div class="absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition backdrop-blur-sm"><span class="text-xs font-bold">FotoÄŸraf DeÄŸiÅŸtir</span></div> {% endif %} </div> {% if current_user.id == user.id %} <form id="avatarForm" action="/upload_avatar" method="POST" enctype="multipart/form-data" class="hidden"> <input type="file" name="avatar" id="avatarInput" accept="image/*" onchange="document.getElementById('avatarForm').submit()"> </form> {% endif %} <div class="text-center md:text-left flex-1 animate__animated animate__fadeInRight"> <div class="flex items-center justify-center md:justify-start gap-2 mb-2"> <h1 class="text-4xl font-bold tracking-tight">@{{ user.username }}</h1> {% if user.is_verified %}<span class="verified-badge w-6 h-6 text-sm shadow-[0_0_10px_#3b82f6]">âœ“</span>{% endif %} </div> <p class="text-gray-400 mb-6 font-light">{{ user.bio }}</p> <div class="flex justify-center md:justify-start gap-8 mb-6"> <div><span class="block font-bold text-2xl">{{ user.followers.count() }}</span><span class="text-xs text-gray-500 uppercase tracking-widest">TakipÃ§i</span></div> <div><span class="block font-bold text-2xl">{{ videos|length }}</span><span class="text-xs text-gray-500 uppercase tracking-widest">Video</span></div> </div> <div class="flex gap-3 justify-center md:justify-start flex-wrap"> {% if current_user.is_authenticated and current_user.id != user.id %} <button id="profile-follow-btn" onclick="followUserFromProfile({{ user.id }})" class="{{ 'border border-white/20' if is_following else 'bg-red-600 shadow-lg' }} px-6 py-2.5 rounded-xl font-bold text-sm transition">{{ 'Takip Ediliyor' if is_following else 'Takip Et' }}</button> <a href="/messages/{{ user.id }}" class="bg-white/10 px-6 py-2.5 rounded-xl font-bold text-sm hover:bg-white/20 transition">Mesaj</a> {% endif %} {% if current_user.is_authenticated and current_user.id == user.id %} {% if user.is_admin %} <a href="/admin" class="bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-6 py-2 rounded-xl font-bold text-sm shadow-lg hover:shadow-cyan-500/50 transition">ğŸ›¡ï¸ Admin Paneli</a> {% endif %} {% if user.is_verified %} <button class="bg-blue-600/10 text-blue-400 border border-blue-600/50 px-4 py-2 rounded-xl font-bold text-sm cursor-default">OnaylÄ± Hesap âœ“</button> {% else %} <form action="/apply_verification" method="POST" class="inline"><button class="bg-white/10 px-4 py-2 rounded-xl font-bold text-sm hover:bg-white/20">Mavi Tik Ä°ste</button></form> {% endif %} <a href="/logout" class="border border-red-500/50 text-red-500 px-6 py-2 rounded-xl font-bold text-sm hover:bg-red-500/10">Ã‡Ä±kÄ±ÅŸ</a> {% endif %} </div> </div> </div> </div> <div class="max-w-5xl mx-auto px-4 mt-8" x-data="{ tab: 'videos' }"> <div class="flex border-b border-white/10 mb-6"> <button @click="tab = 'videos'" :class="{'border-b-2 border-white text-white': tab === 'videos', 'text-gray-500': tab !== 'videos'}" class="flex-1 py-4 font-bold transition">Videolar</button> {% if current_user.id == user.id %} <button @click="tab = 'saved'" :class="{'border-b-2 border-white text-white': tab === 'saved', 'text-gray-500': tab !== 'saved'}" class="flex-1 py-4 font-bold transition">Kaydedilenler</button> {% endif %} </div> <div x-show="tab === 'videos'" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 animate__animated animate__fadeIn"> {% for video in videos %} <a href="/watch/{{ video.id }}" class="aspect-[9/16] bg-gray-900 rounded-xl overflow-hidden relative group border border-white/5 hover:border-white/20 transition"><video src="{{ url_for('static', filename='uploads/' + video.filename) }}" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition duration-500 group-hover:scale-105"></video></a> {% endfor %} </div> {% if current_user.id == user.id %} <div x-show="tab === 'saved'" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 animate__animated animate__fadeIn" style="display: none;"> {% for video in bookmarked %} <a href="/watch/{{ video.id }}" class="aspect-[9/16] bg-gray-900 rounded-xl overflow-hidden relative group border border-yellow-500/30"><video src="{{ url_for('static', filename='uploads/' + video.filename) }}" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition"></video><div class="absolute top-2 right-2 text-xl drop-shadow-md">ğŸ”–</div></a> {% else %} <p class="col-span-full text-center text-gray-500 py-10">HenÃ¼z video kaydetmedin.</p> {% endfor %} </div> {% endif %} </div> </div> <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js"></script> <script> async function followUserFromProfile(uid) { const btn = document.getElementById('profile-follow-btn'); const res = await fetch(`/api/follow/${uid}`, {method:'POST'}); const data = await res.json(); if(data.action === 'followed') { btn.innerText = 'Takip Ediliyor'; btn.classList.remove('bg-red-600', 'shadow-lg'); btn.classList.add('border', 'border-white/20'); } else { btn.innerText = 'Takip Et'; btn.classList.add('bg-red-600', 'shadow-lg'); btn.classList.remove('border', 'border-white/20'); } } </script> {% endblock %} 